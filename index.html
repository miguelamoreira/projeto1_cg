<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
</head>

<body>
    <!-- desenha o canvas -->
    <div style="display: flex; justify-content: center; align-items: center; margin: auto; height: 95vh;">
        <canvas width="1000" height="700" style="border:solid 0px" , id="myCanvas"></canvas>
    </div>

    <script>
        //Const
        const canvas = document.getElementById(`myCanvas`);
        const ctx = canvas.getContext(`2d`);
        const W = canvas.width;
        const H = canvas.height;

        //carregar imagens
        const bg = new Image();
        bg.src = '/images/Inicial/backgraund.svg';

        const broom = new Image();
        broom.src = '/images/Inicial/broom.svg';

        const candles = new Image();
        candles.src = '/images/Inicial/candles.svg';

        const flame = new Image();
        flame.src = '/images/Inicial/flame.svg';

        const witch = new Image();
        witch.src = '/images/Inicial/witch.svg';

        const overlay = new Image();
        overlay.src = '/images/vignette.svg';

        const start = new Image();
        start.src = '/images/Inicial/startGame1.svg';

        const nameGame = new Image();
        nameGame.src = '/images/Inicial/ColorMix.svg';


        //desenha no canvas
        function draw() {
            ctx.clearRect(0, 0, W, H);
            ctx.drawImage(bg, 0, 0);
            ctx.drawImage(broom, 8.4, 104.24)
            ctx.drawImage(candles, 548.3, 473)
            ctx.drawImage(flame, 552.9, 473.4)
            ctx.drawImage(nameGame, 244, 86)
            ctx.drawImage(start, 285, 305)
            ctx.drawImage(witch, 786, 278)
        }


        function isInside(pos, rect) {
            return pos.x > rect.x && pos.x < rect.x + rect.width && pos.y < rect.y + rect.height && pos.y > rect.y;
        }

        canvas.addEventListener('mousemove', (e) => {
            const pos = {
                x: e.clientX - canvas.offsetLeft,
                y: e.clientY - canvas.offsetTop
            };
            let isClickable = false;


            //pointer no start
            if (isInside(pos, { x: 285, y: 305, width: start.width, height: start.height })) {
                document.body.style.cursor = 'pointer';
                start.src = '/images/Inicial/startGame2.svg';
                draw();
                isClickable = true;
            }
            //pointer nas velas
            if (isInside(pos, { x: 548.3, y: 473.4, width: candles.width, height: candles.height })) {
                document.body.style.cursor = 'pointer';
                isClickable = true;
            }
            //clique vassoura
            if (isInside(pos, { x: 8.4, y: 104.24, width: broom.width, height: broom.height })) {
                document.body.style.cursor = 'pointer';
                isClickable = true;
            }
            
            if (!isClickable) {
                start.src = '/images/Inicial/startGame1.svg';
                draw();
                document.body.style.cursor = 'default';
            }
        });

        canvas.addEventListener('click', (e) => {
            const pos = {
                x: e.clientX - canvas.offsetLeft,
                y: e.clientY - canvas.offsetTop
            };
            //mudar para o game
            if (isInside(pos, { x: 285, y: 305, width: start.width, height: start.height })) {
                window.location.href = 'code.html';
            }
            //clique vela
            if (isInside(pos, { x: 548.3, y: 473.4, width: candles.width, height: candles.height })) {
                console.log("vela")
            }
            //clique vassoura
            if (isInside(pos, { x: 8.4, y: 104.24, width: broom.width, height: broom.height })) {
                console.log("vassoura")
            }
        })
        //INICIALIZAÇÃO
        window.onload = function () {
            draw();
        };
    </script>
</body>

</html>