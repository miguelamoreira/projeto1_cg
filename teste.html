<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Change Image Based on Mouse Movement</title>
  <style>
    canvas {
      border: 1px solid #000;
    }
  </style>
</head>
<body>
  <canvas id="imageCanvas" width="800" height="400"></canvas>

  <script>
    var canvas = document.getElementById("imageCanvas");
    var ctx = canvas.getContext("2d");

    var images = [
      "/images/PotionRed1.svg",
      "/images/PotionRed2.svg",
      // Add more image paths as needed
    ];

    var currentImageIndex = 0;
    var isDragging = false;
    var dragStartX, dragStartY;

    function drawImage(x, y) {
      var img = new Image();
      img.src = images[currentImageIndex];

      img.onload = function() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, x, y, img.width, img.height);
      };
    }

    function updateImageBasedOnMousePosition(x, y) {
      // Troca de imagem com base na posição Y do mouse
      if (y > canvas.height / 2) {
        currentImageIndex = 1;
      } else {
        currentImageIndex = 0;
      }
    }

    function handleMouseDown(event) {
      var rect = canvas.getBoundingClientRect();
      var mouseX = event.clientX - rect.left;
      var mouseY = event.clientY - rect.top;

      // Verifica se o clique ocorreu dentro da área da imagem
      if (
        mouseX >= event.clientX &&
        mouseX <= event.clientX + images[currentImageIndex].width &&
        mouseY >= event.clientY &&
        mouseY <= event.clientY + images[currentImageIndex].height
      ) {
        isDragging = true;
        dragStartX = mouseX;
        dragStartY = mouseY;
      }
    }

    function handleMouseUp(event) {
      isDragging = false;
    }

    function handleMouseMove(event) {
      if (isDragging) {
        var offsetX = event.clientX - dragStartX;
        var offsetY = event.clientY - dragStartY;

        // Atualiza a posição inicial para a nova posição do mouse
        dragStartX = event.clientX;
        dragStartY = event.clientY;

        // Desenha a imagem com base na posição atualizada
        drawImage(event.clientX - offsetX, event.clientY - offsetY);
      }
    }

    function handleDragStart(event) {
      event.preventDefault();
    }

    function handleDrop(event) {
      event.preventDefault();
      isDragging = false;

      // Get the dropped file
      var file = event.dataTransfer.files[0];

      // Create a FileReader to read the file
      var reader = new FileReader();
      reader.onload = function (e) {
        // Set the dropped image as the current image
        images[currentImageIndex] = e.target.result;
        // Draw the image at the drop position
        drawImage(event.clientX, event.clientY);
      };
      reader.readAsDataURL(file);
    }

    // Adiciona os ouvintes de eventos
    canvas.addEventListener("mousedown", handleMouseDown);
    canvas.addEventListener("mouseup", handleMouseUp);
    canvas.addEventListener("mousemove", handleMouseMove);
    canvas.addEventListener("dragstart", handleDragStart);
    canvas.addEventListener("drop", handleDrop);

    // Previne o comportamento padrão de arrastar e soltar do navegador
    canvas.addEventListener("dragover", function (e) {
      e.preventDefault();
    });

    // Inicializa a imagem ao carregar a página
    drawImage(0, 0);
  </script>
</body>
</html>
