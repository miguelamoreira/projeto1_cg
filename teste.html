<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
</head>

<body>
    <!-- desenha o canvas -->
    <div style="display: flex; justify-content: center; align-items: center; margin: auto; height: 95vh;">
        <canvas width="1000" height="700" style="border:solid 0px" , id="myCanvas"></canvas>
    </div>

    <script>
        // Const
        const canvas = document.getElementById(`myCanvas`);
        const ctx = canvas.getContext(`2d`);
        const W = canvas.width;
        const H = canvas.height;

        // Carregar imagens
        const bg = new Image();
        bg.src = '/images/Inicial/backgraund.svg';

        const broom = new Image();
        broom.src = '/images/Inicial/broom.svg';

        const flame = new Image();
        flame.src = '/images/Inicial/flame.svg';

        const candles = new Image();
        candles.src = '/images/Inicial/candles.svg';

        const witch = new Image();
        witch.src = '/images/Inicial/witch.svg';

        const overlay = new Image();
        overlay.src = '/images/vignette.svg';

        const start = new Image();
        start.src = '/images/Inicial/startGame1.svg';

        const nameGame = new Image();
        nameGame.src = '/images/Inicial/ColorMix.svg';



        // Função para animar a transparência da chama
        function animateTransparency(timestamp) {
            if (!animationStartTime) {
                animationStartTime = timestamp;
            }

            const elapsed = timestamp - animationStartTime;
            const progress = Math.min(elapsed / 2000, 1); // Duração da animação em milissegundos

            // Aplica a função de transição à opacidade
            flameOpacity = progress;

            draw();

            if (progress < 1) {
                requestAnimationFrame(animateTransparency);
            } else {
                // Reinicia para o estado original após 2 segundos
                flameOpacity = 1;
                animationStartTime = null;
            }
        }

        // Adiciona um evento de clique para iniciar a animação de transparência da chama
        canvas.addEventListener('click', (e) => {
            const pos = {
                x: e.clientX - canvas.offsetLeft,
                y: e.clientY - canvas.offsetTop
            };

            // Animação da vela
            if (isInside(pos, { x: 548.3, y: 473, width: candles.width, height: candles.height })) {
                
                console.log("vela");
            }
        });

        // Função para verificar se uma posição está dentro de uma área retangular
        function isInside(pos, rect) {
            return pos.x > rect.x && pos.x < rect.x + rect.width && pos.y > rect.y && pos.y < rect.y + rect.height;
        }

        // INICIALIZAÇÃO
        window.onload = function () {
            draw();
        };
    </script>
</body>

</html>
